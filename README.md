# Проект панели GateCx
Этот проект состоит из пользовательского фронтенда, бэкенда на Node.js с базой данных SQLite и панели администратора на React для управления системой.
## Стек технологий
- **Бэкенд:** `Node.js`, `Express.js`
- **База данных:** `SQLite` (better-sqlite3)
- **Панель администратора:** `React`
- **Аутентификация:** `JSON Web Tokens` + `bcryptjs` 
## Структура проекта
```
/
├── site/               # Фронтенд (статичные HTML, CSS, JS)
└── src/                # Исходный код бэкенда и админ-панели
    ├── admin/          # Панель администратора на React
    │   ├── public/
    │   ├── src/
    │   └── ...
    ├── database/       # Настройка и файл базы данных
    │   ├── setup.js
    │   └── gatecx.db
    ├── routes/         # API эндпоинты
    │   ├── auth.js
    │   └── ...
    ├── index.js        # Основной файл бэкенд-сервера
    └── package.json
```
## Установка и запуск
### Предварительные требования
- Node.js (рекомендуется LTS-версия)
- npm (поставляется с Node.js)
- socket.io
- **Для Windows:** Visual Studio Build Tools с установленной "Разработка классических приложений на C++".
### 1. Настройка бэкенда
1. Перейдите в директорию `src`:
    ```
    cd src
    ```
2. Установите зависимости:
    ```
    npm install
    ```
3. Запустите бэкенд-сервер:
    ```
    npm start
    ```
    Сервер запустится по адресу `http://localhost:4444`. При первом запуске он создаст файл `src/database/gatecx.db` и добавит в него администратора по умолчанию.
### 2. Настройка админ-панели (для разработки)
1. Откройте **новый терминал** и перейдите в директорию `src/admin`:
    ```
    cd src/admin
    ```
2. Установите зависимости:
    ```
    npm install
    ```
3. Запустите сервер для разработки React:
    ```
    npm start
    ```
    Панель администратора будет доступна по адресу `http://localhost:3000` и будет проксировать API-запросы на бэкенд-сервер.
## Использование
### Основной сайт
- **URL:** `http://localhost:4444`
- Пользователи могут регистрироваться и входить в систему.
- Навигация и контент отображаются динамически на основе прав, выданных администратором.
### Панель администратора
- **URL для разработки:** `http://localhost:3000`
- **URL для продакшена:** `http://localhost:4444/admin` (после выполнения команды `npm run build` в папке `src/admin`)
- **Учетные данные по умолчанию:**
    - **Логин:** `admin`
    - **Пароль:** `paneladmin`
### Ключевые API эндпоинты
- `POST /api/auth/register` - Зарегистрировать нового пользователя.
- `POST /api/auth/login` - Войти как пользователь или администратор.
- `GET /api/users` - (Админ) Получить список всех пользователей.
- `PUT /api/users/:id/permissions` - (Админ) Обновить права пользователя.
- `POST /api/admin/reset-data` - (Админ) Очистить все транзакционные данные из базы данных.
- CRUD эндпоинты для `/api/deals`, `/api/disputes`, `/api/requisites` и т.д.
